<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>index – SSP Cloud Datalab</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../src/implementation/index.html" rel="next">
<link href="../../src/introduction/index.html" rel="prev">
<link href="../../images/favicon.ico" rel="icon">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-0612a1b5e2f90f59bb97baa018b2b40e.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles/styles.css">
</head>

<body class="nav-sidebar docked slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../src/principles/index.html">2 - Principes</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-center sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../../">SSP Cloud Datalab</a> 
        <div class="sidebar-tools-main">
    <div class="dropdown">
      <a href="" title="" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label=""><i class="bi bi-translate"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="../../../fr/">
            Français
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="../../../en/">
            English
            </a>
          </li>
      </ul>
    </div>
    <a href="../../src/pdf-fr/index.pdf" title="PDF" class="quarto-navigation-tool px-1" aria-label="PDF"><i class="bi bi-file-pdf-fill"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/introduction/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">1 - Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/principles/index.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">2 - Principes</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/implementation/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">3 - Implémentation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/mlops/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">4 - MLOps</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/discussion/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">5 - Discussion</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#sec-principles-fr" id="toc-sec-principles-fr" class="nav-link active" data-scroll-target="#sec-principles-fr"><span class="header-section-number">2</span> Principes pour construire une architecture de données moderne et flexible pour les statistiques publiques</a>
  <ul class="collapse">
  <li><a href="#limites-des-architectures-traditionnelles-pour-les-big-data" id="toc-limites-des-architectures-traditionnelles-pour-les-big-data" class="nav-link" data-scroll-target="#limites-des-architectures-traditionnelles-pour-les-big-data"><span class="header-section-number">2.1</span> Limites des architectures traditionnelles pour les big data</a></li>
  <li><a href="#sec-cloud-native-fr" id="toc-sec-cloud-native-fr" class="nav-link" data-scroll-target="#sec-cloud-native-fr"><span class="header-section-number">2.2</span> Adopter les technologies cloud</a></li>
  <li><a href="#exploiter-les-technologies-cloud-pour-accroître-lautonomie-et-favoriser-la-reproductibilité" id="toc-exploiter-les-technologies-cloud-pour-accroître-lautonomie-et-favoriser-la-reproductibilité" class="nav-link" data-scroll-target="#exploiter-les-technologies-cloud-pour-accroître-lautonomie-et-favoriser-la-reproductibilité"><span class="header-section-number">2.3</span> Exploiter les technologies cloud pour accroître l’autonomie et favoriser la reproductibilité</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"></header>




<!-- ############################################################################################################## -->
<!-- ############################################################################################################## -->
<!-- ############################################################################################################## -->
<section id="sec-principles-fr" class="level1 page-columns page-full" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Principes pour construire une architecture de données moderne et flexible pour les statistiques publiques</h1>
<p>Avec l’émergence de sources de données massives et de nouvelles méthodologies prometteuses pour améliorer le processus de production des statistiques publiques, les statisticiens formés aux techniques de <em>datascience</em> sont désireux d’innover. Cependant, leur capacité à le faire est limitée par plusieurs défis. L’un des principaux défis réside dans le besoin d’une plus grande autonomie — qu’il s’agisse de dimensionner la puissance de calcul en fonction des chaînes de productions statistiques, de déployer des preuves de concept avec agilité et de manière collaborative, etc. Dans ce contexte, notre objectif était de concevoir une plateforme de <em>datascience</em> qui non seulement gère efficacement les données massives, mais qui renforce également l’autonomie des statisticiens. Pour y parvenir, nous avons étudié l’évolution de l’écosystème des données afin d’identifier les tendances significatives susceptibles de surmonter les limitations mentionnées précédemment<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>. Nos conclusions indiquent que l’adoption des technologies <em>cloud</em>, en particulier les conteneurs et le stockage objet, est essentielle pour construire des infrastructures capables de gérer des ensembles de données volumineux et variés de manière flexible et économique. De plus, ces technologies améliorent considérablement l’autonomie, facilitant ainsi l’innovation et favorisant la reproductibilité dans la production des statistiques publiques.</p>
<div class="no-row-height column-margin column-container"><div id="fn1"><p><sup>1</sup>&nbsp;En préambule à cette analyse, il convient de noter que, bien que nous ayons fait de notre mieux pour ancrer nos réflexions dans la littérature académique, une grande partie de nos observations provient de connaissances informelles acquises grâce à une veille technologique assidue et continue. Dans l’écosystème des données, qui est en constante évolution, les articles de recherche traditionnels cèdent de plus en plus la place aux billets de blog en tant que principales références pour les développements de pointe. Ce changement s’explique en grande partie par le rythme soutenu auquel les technologies et méthodologies liées aux données massives progressent, rendant souvent le processus de publication formelle trop long pour la diffusion de connaissances et d’innovations.</p></div></div><section id="limites-des-architectures-traditionnelles-pour-les-big-data" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="limites-des-architectures-traditionnelles-pour-les-big-data"><span class="header-section-number">2.1</span> Limites des architectures traditionnelles pour les big data</h2>
<p>Au cours de la dernière décennie, le paysage des <em>big data</em> s’est transformé de manière spectaculaire. Suite à la publication des articles fondateurs de Google introduisant le <em>MapReduce</em> <span class="citation" data-cites="ghemawat2003google abdelaziz2023optimizing dean2008mapreduce">(<a href="#ref-ghemawat2003google" role="doc-biblioref">Ghemawat, Gobioff, and Leung 2003</a>; <a href="#ref-abdelaziz2023optimizing" role="doc-biblioref">Abdelaziz et al. 2023</a>; <a href="#ref-dean2008mapreduce" role="doc-biblioref">Dean and Ghemawat 2008</a>)</span>, les systèmes basés sur Hadoop sont rapidement devenus l’architecture de référence dans l’écosystème des données massives, salués pour leur capacité à gérer d’importants ensembles de données grâce aux calculs distribués. L’introduction d’Hadoop a marqué une étape révolutionnaire, permettant aux organisations de traiter et d’analyser des données à une échelle sans précédent. En substance, Hadoop offrait aux entreprises des capacités complètes pour l’analyse de <em>big data</em> : des outils pour la collecte, le stockage des données (HDFS) et des capacités de calcul (notamment Spark) <span class="citation" data-cites="dhyani2014big">(<a href="#ref-dhyani2014big" role="doc-biblioref">Dhyani and Barthwal 2014</a>)</span>, expliquant ainsi son adoption rapide dans les industries.</p>
<p>À la fin des années 2010, les architectures basées sur Hadoop ont connu un net déclin de popularité. Dans les environnements Hadoop traditionnels, le stockage et le calcul étaient co-localisés par construction : si les données sources étaient réparties sur plusieurs serveurs (scalabilité horizontale), chaque section des données était directement traitée sur la machine hébergeant cette section, afin d’éviter les transferts réseau entre serveurs. Dans ce paradigme, la mise à l’échelle de l’architecture impliquait souvent une augmentation linéaire à la fois des capacités de calcul et de stockage, indépendamment de la demande réelle. Dans un article volontairement provocateur et intitulé “Big Data is Dead” <span class="citation" data-cites="Tigani_2023">(<a href="#ref-Tigani_2023" role="doc-biblioref">Tigani 2023</a>)</span>, Jordan Tigani, l’un des ingénieurs fondateurs de Google BigQuery, explique pourquoi ce modèle ne correspond plus à la réalité de la plupart des organisations centrées sur les données. Premièrement, parce que “dans la pratique, la taille des données augmente beaucoup plus rapidement que les besoins en calcul”. Alors que la quantité de données générées et nécessitant donc d’être stockées peut croître de manière linéaire au fil du temps, il est généralement vrai que nous n’aillons besoin d’interroger que les portions les plus récentes, ou seulement certaines colonnes et/ou groupes de lignes. Par ailleurs, Tigani souligne que “la frontière du <em>big data</em> ne cesse de reculer” : les avancées dans les capacités des serveurs et la baisse des coûts du matériel signifient que le nombre de charges de travail ne tenant pas sur une seule machine — une définition simple mais efficace du <em>big data</em> — a diminué de manière continue. En conséquence, en séparant correctement les fonctions de stockage et de calcul, même les traitements de données substantiels peuvent finir par utiliser “beaucoup moins de calcul que prévu […] et pourraient même ne pas avoir besoin d’un traitement distribué du tout”.</p>
<p>Ces observations concordent fortement avec nos propres constats à l’Insee au cours des dernières années. Par exemple, une équipe de l’Insee a mis en place un cluster Hadoop en tant qu’architecture alternative à celle déjà utilisée pour traiter les données des tickets de caisse dans le cadre du calcul de l’indice des prix à la consommation. Une accélération des opérations de traitement des données pouvant aller jusqu’à un facteur 10 a été obtenue, pour des opérations qui prenaient auparavant plusieurs heures <span class="citation" data-cites="leclair2019utiliser">(<a href="#ref-leclair2019utiliser" role="doc-biblioref">Leclair et al. 2019</a>)</span>. Malgré cette amélioration des performances, ce type d’architectures n’a pas été réutilisé par la suite pour d’autres projets, principalement parce que l’architecture s’est révélée coûteuse et complexe à maintenir, nécessitant une expertise technique spécialisée rarement disponible au sein des Instituts Nationaux de Statistiques (INS) <span class="citation" data-cites="vale2015international">(<a href="#ref-vale2015international" role="doc-biblioref">Vale 2015</a>)</span>. Bien que ces nouveaux projets puissent encore impliquer des volumes de données massifs, nous avons observé que des traitements efficaces pouvaient être réalisés à l’aide de logiciels conventionnels (R, Python) sur des systèmes à nœud unique, en tirant parti des récentes innovations importantes de l’écosystème des données. Tout d’abord, en utilisant des formats de stockage efficaces tels qu’Apache Parquet <span class="citation" data-cites="parquet2013">(<a href="#ref-parquet2013" role="doc-biblioref">Foundation 2013</a>)</span>, dont les propriétés — stockage en colonnes <span class="citation" data-cites="abadi2013design">(<a href="#ref-abadi2013design" role="doc-biblioref">Abadi et al. 2013</a>)</span> (voir <a href="#fig-columnar-storage" class="quarto-xref">Figure&nbsp;1</a>), optimisation pour les analyses “écrire une fois, lire plusieurs fois”, possibilité de partitionner les données, etc. — le rendent particulièrement adapté aux tâches analytiques comme celles généralement effectuées dans les statistiques publiques <span class="citation" data-cites="abdelaziz2023optimizing">(<a href="#ref-abdelaziz2023optimizing" role="doc-biblioref">Abdelaziz et al. 2023</a>)</span>. Ensuite, en effectuant des calculs optimisés en mémoire tels qu’Apache Arrow <span class="citation" data-cites="arrow2016">(<a href="#ref-arrow2016" role="doc-biblioref">Foundation 2016</a>)</span> ou DuckDB <span class="citation" data-cites="raasveldt2019duckdb">(<a href="#ref-raasveldt2019duckdb" role="doc-biblioref">Raasveldt and Mühleisen 2019</a>)</span> le proposent. Également basés sur une représentation en colonnes — travaillant ainsi en synergie avec les fichiers Parquet — ces deux logiciels améliorent considérablement les performances des requêtes de données grâce à l’utilisation de l’“évaluation paresseuse” (<em>lazy evaluation</em>) : au lieu d’exécuter de nombreuses opérations distinctes (par exemple, sélectionner des colonnes et/ou filtrer des lignes, puis calculer de nouvelles colonnes, puis effectuer des agrégations, etc.), ils les traitent toutes en une fois de manière plus optimisée. En conséquence, les calculs se limitent aux données effectivement nécessaires pour les requêtes, permettant le traitement de données beaucoup plus importantes que la mémoire disponible sur des machines classiques à nœud unique.</p>
<div id="fig-columnar-storage" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-columnar-storage-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../../figures/columnar-storage.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-columnar-storage-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: Représentation orientée ligne et orientée colonne d’un même jeu de données.
</figcaption>
</figure>
</div>
<p>Note: De nombreuses opérations statistiques sont analytiques (OLAP) par nature : elles impliquent la sélection de colonnes spécifiques, le calcul de nouvelles variables, la réalisation d’agrégations basées sur des groupes, etc. Le stockage orienté ligne n’est pas bien adapté à ces opérations analytiques, car il nécessite de charger l’ensemble du jeu de données en mémoire afin d’effectuer une requête. À l’inverse, le stockage orienté colonne permet de ne lire que les colonnes de données pertinentes, ce qui réduit considérablement les temps de lecture et de traitement pour ces charges de travail analytiques. En pratique, les formats colonnes populaires tels que Parquet utilisent une représentation hybride : ils sont principalement orientés colonne, mais intègrent également un regroupement astucieux basé sur les lignes pour optimiser les requêtes de filtrage.</p>
</section>
<section id="sec-cloud-native-fr" class="level2 page-columns page-full" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="sec-cloud-native-fr"><span class="header-section-number">2.2</span> Adopter les technologies cloud</h2>
<p>Suite à cette évolution de l’écosystème des big data, on observe un virage notable ces dernières années dans l’industrie vers des architectures plus flexibles et faiblement couplées. L’avènement des technologies <em>cloud</em> a joué un rôle déterminant dans cette transition. Contrairement à l’époque où Hadoop dominait, la latence réseau est devenue une préoccupation bien moindre, rendant le modèle traditionnel de solutions de stockage et de calcul sur site et co-localisées moins pertinent. Concernant la nature des données à traiter, on observe une évolution que certains ont qualifiée de passage “du big data aux données flexibles”. Les infrastructures modernes doivent non seulement être capables de traiter de grands volumes, mais aussi être adaptables sur de multiples dimensions. Elles doivent pouvoir prendre en charge diverses structures de données (allant des formats structurés et tabulaires aux formats non structurés comme le texte et les images), assurer la portabilité des données dans des environnements <em>multi-cloud</em> et <em>cloud</em> hybride, et prendre en charge une large gamme de calculs computationnels (des calculs parallèles aux modèles d’apprentissage profond nécessitant des GPU, ainsi que le déploiement et la gestion d’applications) <span class="citation" data-cites="li2020big">(<a href="#ref-li2020big" role="doc-biblioref">Li et al. 2020</a>)</span>. Ces dernières années, deux technologies ont émergé comme des éléments fondamentaux pour atteindre cette flexibilité dans les environnements <em>cloud</em> : la conteneurisation et le stockage d’objets.</p>
<p>Dans un environnement <em>cloud</em>, l’ordinateur de l’utilisateur devient un simple point d’accès pour effectuer des calculs sur une infrastructure centrale. Cela permet à la fois un accès ubiquitaire et une scalabilité des services, car il est plus facile de mettre à l’échelle une infrastructure centrale — généralement de manière horizontale, c’est-à-dire en ajoutant davantage de serveurs. Cependant, ces infrastructures centralisées présentent deux limites bien identifiées qui doivent être prises en compte : la concurrence entre utilisateurs pour l’accès aux ressources physiques et la nécessité d’isoler correctement les applications déployées. Le choix de la conteneurisation est fondamental, car il répond à ces deux enjeux <span class="citation" data-cites="bentaleb2022containerization">(<a href="#ref-bentaleb2022containerization" role="doc-biblioref">Bentaleb et al. 2022</a>)</span>. En créant des “bulles” spécifiques à chaque service, les conteneurs garantissent l’isolement des applications tout en restant légers, puisqu’ils partagent le système d’exploitation de support avec la machine hôte (voir <a href="#fig-containers" class="quarto-xref">Figure&nbsp;2</a>). Pour gérer plusieurs applications conteneurisées de manière systématique, les infrastructures conteneurisées s’appuient généralement sur un logiciel orchestrateur — le plus connu étant Kubernetes, un projet open source initialement développé par Google pour gérer ses nombreuses charges de travail conteneurisées en production <span class="citation" data-cites="vano2023cloud">(<a href="#ref-vano2023cloud" role="doc-biblioref">Vaño et al. 2023</a>)</span>. Les orchestrateurs automatisent le processus de déploiement, de mise à l’échelle et de gestion des applications conteneurisées, coordonnant leur exécution sur différents serveurs. De manière intéressante, cette propriété permet de traiter de très grands volumes de données de manière distribuée : les conteneurs décomposent les opérations de traitement des données massives en une multitude de petites tâches, organisées par l’orchestrateur. Cela minimise les ressources requises tout en offrant une flexibilité supérieure aux architectures basées sur Hadoop <span class="citation" data-cites="zhang2018comparative">(<a href="#ref-zhang2018comparative" role="doc-biblioref">Zhang et al. 2018</a>)</span>.</p>
<div id="fig-containers" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-containers-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../../figures/containers.png" class="img-fluid figure-img" style="width:65.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-containers-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: Architecture d’un environnement conteneurisé.
</figcaption>
</figure>
</div>
<p>Note: Un conteneur est un regroupement logique de ressources permettant d’encapsuler une application (par exemple, du code R), les bibliothèques utilisées (par exemple, ggplot, dplyr) et les bibliothèques système (l’interpréteur R, d’autres bibliothèques dépendantes du système d’exploitation, etc.) dans un seul package. Les applications conteneurisées sont isolées les unes des autres grâce à la virtualisation, ce qui permet d’attribuer des ressources physiques spécifiques à chaque application tout en garantissant leur indépendance totale. Contrairement aux machines virtuelles, qui virtualisent également le système d’exploitation (OS), les conteneurs s’appuient sur une forme de virtualisation légère : le conteneur partage l’OS de l’infrastructure hôte via le runtime de conteneur (par exemple, Docker). En conséquence, les conteneurs sont beaucoup plus portables et peuvent être déployés et redistribués facilement.</p>
<p>L’autre choix fondamental dans une architecture de données concerne la nature du stockage de ces données. Dans l’écosystème <em>cloud</em>, le “stockage d’objets” est devenu la référence <em>de facto</em> <span class="citation" data-cites="samundiswary2017object">(<a href="#ref-samundiswary2017object" role="doc-biblioref">Samundiswary and Dongre 2017</a>)</span> <a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>. Dans ce paradigme, les fichiers sont stockés sous forme d’“objets” composés de données, d’un identifiant et de métadonnées. Ce type de stockage est optimisé pour la scalabilité, car les objets ne sont pas limités en taille et la technologie sous-jacente permet un stockage rentable de fichiers (potentiellement très) volumineux. Le stockage d’objets joue également un rôle clé dans la construction d’une infrastructure découplée comme celle évoquée précédemment : les dépôts de données — appelés <em>“buckets”</em> — sont directement interrogeables via des requêtes HTTP standards grâce à une API REST normalisée. Dans un contexte où la latence réseau n’est plus le principal goulot d’étranglement, cela signifie que le stockage et le calcul n’ont pas besoin d’être sur les mêmes machines, ni même dans le même lieu. Ils peuvent ainsi évoluer indépendamment en fonction des besoins spécifiques de l’organisation. Enfin, le stockage d’objets est un complément naturel aux architectures basées sur des environnements conteneurisés. Il fournit une couche de persistance — les conteneurs étant par construction sans état (<em>stateless</em>) — et une connectivité facile, sans compromettre la sécurité, voire en renforçant celle-ci par rapport à un système de stockage traditionnel <span class="citation" data-cites="mesnier2003object">(<a href="#ref-mesnier2003object" role="doc-biblioref">Mesnier, Ganger, and Riedel 2003</a>)</span>.</p>
<div class="no-row-height column-margin column-container"><div id="fn2"><p><sup>2</sup>&nbsp;Principalement grâce à l’implémentation “S3” (Simple Storage Service) d’Amazon.</p></div></div></section>
<section id="exploiter-les-technologies-cloud-pour-accroître-lautonomie-et-favoriser-la-reproductibilité" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="exploiter-les-technologies-cloud-pour-accroître-lautonomie-et-favoriser-la-reproductibilité"><span class="header-section-number">2.3</span> Exploiter les technologies cloud pour accroître l’autonomie et favoriser la reproductibilité</h2>
<p>Comprendre comment les choix technologiques décrits dans la discussion technique ci-dessus sont pertinents dans le contexte des statistiques publiques nécessite un examen approfondi des pratiques professionnelles des statisticiens dans leur utilisation des environnements informatiques. À la fin des années 2000, alors que la micro-informatique était à son apogée, une grande partie des ressources techniques utilisées par les statisticiens de l’Insee étaient locales : le code et les logiciels de traitement étaient situés sur des ordinateurs personnels, tandis que les données étaient accessibles via un système de partage de fichiers. En raison de la scalabilité limitée des ordinateurs personnels, cette configuration restreignait considérablement la capacité des statisticiens à expérimenter avec des sources <em>big data</em> ou des méthodes statistiques intensives en calculs, et cela impliquait des risques de sécurité liés à la diffusion étendue des données au sein de l’organisation. Pour surmonter ces limitations, une transition a été opérée vers des infrastructures informatiques centralisées, regroupant toutes les ressources — et donc globalement beaucoup plus — sur des serveurs centraux. Ces infrastructures, mises à disposition des statisticiens via un environnement de bureau virtuel partagé pour faciliter leur utilisation, constituent encore la méthode dominante pour réaliser des calculs statistiques à l’Insee au moment de la rédaction de ces lignes.</p>
<p>À travers nos observations et nos discussions avec d’autres statisticiens, il est devenu évident que, bien que l’infrastructure informatique actuelle soutienne adéquatement les activités fondamentales de production statistique, elle restreint de manière notable la capacité des statisticiens à expérimenter librement et à innover. Le principal goulot d’étranglement dans cette organisation réside dans la dépendance des projets statistiques à la prise de décision centralisée en matière d’informatique, notamment en ce qui concerne l’allocation des ressources de calcul, l’accès au stockage partagé, l’utilisation de langages de programmation préconfigurés etc. En outre, ces dépendances conduisent souvent à un phénomène bien connu dans la communauté du développement logiciel, où les priorités des développeurs — itérer rapidement pour améliorer continuellement les fonctionnalités — entrent souvent en conflit avec l’objectif des équipes informatiques de garantir la sécurité et la stabilité des processus. À l’inverse, nous comprenons que les pratiques modernes en <em>datascience</em> reflètent une implication accrue des statisticiens dans le développement et l’orchestration informatique de leurs opérations de traitement de données, au-delà de la simple phase de conception ou de validation. Les nouvelles infrastructures de <em>datascience</em> doivent donc prendre en compte ce rôle élargi de leurs utilisateurs, en leur offrant plus d’autonomie que les infrastructures traditionnelles.</p>
<p>Nous soutenons que les technologies <em>cloud</em> sont une solution puissante pour offrir aux statisticiens une autonomie bien plus grande dans leur travail quotidien, favorisant ainsi une culture de l’innovation. Grâce au stockage d’objets, les utilisateurs obtiennent un contrôle direct sur la couche de stockage, leur permettant d’expérimenter avec des sources de données diverses sans être limités par les espaces de stockage souvent restreints et alloués par les départements informatiques. La conteneurisation permet aux utilisateurs de personnaliser leurs environnements de travail selon leurs besoins spécifiques — qu’il s’agisse de langages de programmation, de bibliothèques système ou de versions de packages — tout en leur offrant la flexibilité nécessaire pour adapter leurs applications à la puissance de calcul et aux capacités de stockage requises. Par construction, les conteneurs favorisent également le développement d’applications portables, permettant des transitions plus fluides entre les environnements (développement, test, pré-production, production), en garantissant que les applications peuvent être exécutées sans difficulté, évitant ainsi les problèmes liés aux incohérences d’environnement. Enfin, avec des outils d’orchestration tels que Kubernetes, les statisticiens peuvent déployer plus facilement des applications et des API, tout en automatisant l’ensemble du processus de construction. Cette capacité s’aligne avec l’approche DevOps, qui préconise la création de preuves de concept de manière itérative, plutôt que de chercher à développer la solution optimale (mais chronophage) pour un objectif préalablement défini <span class="citation" data-cites="leite2019survey">(<a href="#ref-leite2019survey" role="doc-biblioref">Leite et al. 2019</a>)</span>.</p>
<div id="fig-containers-portability" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-containers-portability-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../../figures/containers-portability.png" class="img-fluid figure-img" style="width:85.0%">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-containers-portability-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: Par construction, les conteneurs favorisent la reproductibilité et la portabilité.
</figcaption>
</figure>
</div>
<p>Note: Dans un environnement conteneurisé, les applications sont créées à partir de spécifications sous forme de scripts — un paradigme connu sous le nom d’<em>“infrastructure as code”</em>. Dans un fichier texte, conventionnellement nommé “Dockerfile”, les <em>data scientists</em> peuvent spécifier l’environnement de travail de leur application : le code de l’application, les logiciels à inclure (par exemple, R), les packages utilisés pour leurs opérations de traitement (par exemple, le package R pour le calcul géospatial <em>sf</em>), ainsi que les bibliothèques système dépendant de l’OS appelées par ces packages (par exemple, GDAL, la bibliothèque qui permet de lire et de traiter les formats d’images géospatiales utilisée par la plupart des packages traitant des données géospatiales). Un point essentiel est que les versions des logiciels et des packages utilisés pour développer l’application peuvent être précisément spécifiées, ce qui garantit la reproductibilité des calculs effectués. Une étape de construction génère ensuite une image associée au Dockerfile, c’est-à-dire une forme empaquetée et compressée de l’environnement de travail de l’application. Les images créées de cette manière sont portables : elles peuvent être facilement distribuées — généralement via un registre de conteneurs — et exécutées de manière reproductible sur n’importe quelle infrastructure disposant d’un runtime de conteneur.</p>
<p>Outre la scalabilité et l’autonomie, ces choix architecturaux favorisent également la reproductibilité des calculs statistiques. Le concept de reproductibilité — à savoir la capacité de reproduire le résultat d’une expérience en appliquant la même méthodologie aux mêmes données — est un critère fondamental de validité scientifique <span class="citation" data-cites="mcnutt2014reproducibility">(<a href="#ref-mcnutt2014reproducibility" role="doc-biblioref">McNutt 2014</a>)</span>. Il est également très pertinent dans le domaine des statistiques publiques, car il constitue une base pour la transparence, essentielle pour établir et maintenir la confiance du public <span class="citation" data-cites="eurocodepractice2018">(<a href="#ref-eurocodepractice2018" role="doc-biblioref">European Commission, n.d.</a>)</span>. Favoriser la reproductibilité dans la production statistique implique de concevoir des solutions de traitement capables de produire des statistiques reproductibles, tout en étant partageables entre pairs <span class="citation" data-cites="ntts2019reproducibility">(<a href="#ref-ntts2019reproducibility" role="doc-biblioref">Luhmann et al. 2019</a>)</span>. Les infrastructures informatiques traditionnelles — qu’il s’agisse d’un ordinateur personnel ou d’une infrastructure partagée avec un accès à distance — sont insuffisantes à cet égard. Construire un projet ou calculer un simple indicateur statistique dans ces environnements implique généralement une série d’étapes manuelles (installation des bibliothèques système, des binaires du langage de programmation, des packages du projet, gestion des versions conflictuelles, etc.) qui ne peuvent pas être pleinement reproduites d’un projet à l’autre. En comparaison, les conteneurs sont reproductibles par définition, car leur processus de construction implique de définir précisément toutes les ressources nécessaires comme un ensemble d’opérations standardisées, allant de la “machine nue” à l’application en cours d’exécution <span class="citation" data-cites="moreau2023containers">(<a href="#ref-moreau2023containers" role="doc-biblioref">Moreau, Wiebels, and Boettiger 2023</a>)</span>. De plus, ces environnements reproductibles peuvent être facilement partagés avec des pairs, car ils peuvent être publiés sur des registres ouverts (par exemple, un registre de conteneurs comme DockerHub) avec le code source de l’application (par exemple, sur une forge logicielle publique comme GitHub ou GitLab). Cette approche améliore considérablement la réutilisation des projets de code, favorisant un modèle de développement et d’innovation basé sur la collaboration communautaire.</p>



</section>
</section>


<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-abadi2013design" class="csl-entry" role="listitem">
Abadi, Daniel, Peter Boncz, Stavros Harizopoulos, Stratos Idreos, Samuel Madden, et al. 2013. <span>“The Design and Implementation of Modern Column-Oriented Database Systems.”</span> <em>Foundations and Trends<span></span> in Databases</em> 5 (3): 197–280.
</div>
<div id="ref-abdelaziz2023optimizing" class="csl-entry" role="listitem">
Abdelaziz, Abdullah I, Kent A Hanson, Charles E Gaber, and Todd A Lee. 2023. <span>“Optimizing Large Real-World Data Analysis with Parquet Files in r: A Step-by-Step Tutorial.”</span> <em>Pharmacoepidemiology and Drug Safety</em>.
</div>
<div id="ref-bentaleb2022containerization" class="csl-entry" role="listitem">
Bentaleb, Ouafa, Adam SZ Belloum, Abderrazak Sebaa, and Aouaouche El-Maouhab. 2022. <span>“Containerization Technologies: Taxonomies, Applications and Challenges.”</span> <em>The Journal of Supercomputing</em> 78 (1): 1144–81.
</div>
<div id="ref-dean2008mapreduce" class="csl-entry" role="listitem">
Dean, Jeffrey, and Sanjay Ghemawat. 2008. <span>“MapReduce: Simplified Data Processing on Large Clusters.”</span> <em>Communications of the ACM</em> 51 (1): 107–13.
</div>
<div id="ref-dhyani2014big" class="csl-entry" role="listitem">
Dhyani, Bijesh, and Anurag Barthwal. 2014. <span>“Big Data Analytics Using Hadoop.”</span> <em>International Journal of Computer Applications</em> 108 (12): 0975–8887.
</div>
<div id="ref-eurocodepractice2018" class="csl-entry" role="listitem">
European Commission. n.d. <span>“European Statistics Code of Practice — Revised Edition 2017.”</span> <a href="https://ec.europa.eu/eurostat/web/products-catalogues/-/ks-02-18-142" class="uri">https://ec.europa.eu/eurostat/web/products-catalogues/-/ks-02-18-142</a>.
</div>
<div id="ref-parquet2013" class="csl-entry" role="listitem">
Foundation, Apache Software. 2013. <span>“Apache Parquet.”</span> <a href="https://parquet.apache.org/" class="uri">https://parquet.apache.org/</a>.
</div>
<div id="ref-arrow2016" class="csl-entry" role="listitem">
———. 2016. <span>“Apache Arrow.”</span> <a href="https://arrow.apache.org/" class="uri">https://arrow.apache.org/</a>.
</div>
<div id="ref-ghemawat2003google" class="csl-entry" role="listitem">
Ghemawat, Sanjay, Howard Gobioff, and Shun-Tak Leung. 2003. <span>“The Google File System.”</span> In <em>Proceedings of the Nineteenth ACM Symposium on Operating Systems Principles</em>, 29–43.
</div>
<div id="ref-leclair2019utiliser" class="csl-entry" role="listitem">
Leclair, Marie et al. 2019. <span>“Using Scanner Data to Calculate the Consumer Price Index.”</span> <em>Courrier Des Statistiques</em> 3: 61–75.
</div>
<div id="ref-leite2019survey" class="csl-entry" role="listitem">
Leite, Leonardo, Carla Rocha, Fabio Kon, Dejan Milojicic, and Paulo Meirelles. 2019. <span>“A Survey of DevOps Concepts and Challenges.”</span> <em>ACM Computing Surveys (CSUR)</em> 52 (6): 1–35.
</div>
<div id="ref-li2020big" class="csl-entry" role="listitem">
Li, Yun, Manzhu Yu, Mengchao Xu, Jingchao Yang, Dexuan Sha, Qian Liu, and Chaowei Yang. 2020. <span>“Big Data and Cloud Computing.”</span> <em>Manual of Digital Earth</em>, 325–55.
</div>
<div id="ref-ntts2019reproducibility" class="csl-entry" role="listitem">
Luhmann, Sybille, Jacopo Grazzini, Fabio Ricciato, Mátyás Mészáros, Jean-Marc Museux, and Martina Hahn. 2019. <span>“Promoting Reproducibility-by-Design in Statistical Offices.”</span> In <em>2019 New Techniques and Technologies for Statistics (NTTS) Conference</em>. <a href="https://doi.org/10.5281/zenodo.3240198">https://doi.org/10.5281/zenodo.3240198</a>.
</div>
<div id="ref-mcnutt2014reproducibility" class="csl-entry" role="listitem">
McNutt, Marcia. 2014. <span>“Reproducibility.”</span> <em>Science</em> 343 (6168): 229–29.
</div>
<div id="ref-mesnier2003object" class="csl-entry" role="listitem">
Mesnier, Mike, Gregory R Ganger, and Erik Riedel. 2003. <span>“Object-Based Storage.”</span> <em>IEEE Communications Magazine</em> 41 (8): 84–90.
</div>
<div id="ref-moreau2023containers" class="csl-entry" role="listitem">
Moreau, David, Kristina Wiebels, and Carl Boettiger. 2023. <span>“Containers for Computational Reproducibility.”</span> <em>Nature Reviews Methods Primers</em> 3 (1): 50.
</div>
<div id="ref-raasveldt2019duckdb" class="csl-entry" role="listitem">
Raasveldt, Mark, and Hannes Mühleisen. 2019. <span>“Duckdb: An Embeddable Analytical Database.”</span> In <em>Proceedings of the 2019 International Conference on Management of Data</em>, 1981–84.
</div>
<div id="ref-samundiswary2017object" class="csl-entry" role="listitem">
Samundiswary, S, and Nilma M Dongre. 2017. <span>“Object Storage Architecture in Cloud for Unstructured Data.”</span> In <em>2017 International Conference on Inventive Systems and Control (ICISC)</em>, 1–6. IEEE.
</div>
<div id="ref-Tigani_2023" class="csl-entry" role="listitem">
Tigani, Jordan. 2023. <span>“Big Data Is Dead.”</span> <a href="https://motherduck.com/blog/big-data-is-dead/">https://motherduck.com/blog/big-data-is-dead/</a>.
</div>
<div id="ref-vale2015international" class="csl-entry" role="listitem">
Vale, Steven. 2015. <span>“International Collaboration to Understand the Relevance of Big Data for Official Statistics.”</span> <em>Statistical Journal of the IAOS</em> 31 (2): 159–63.
</div>
<div id="ref-vano2023cloud" class="csl-entry" role="listitem">
Vaño, Rafael, Ignacio Lacalle, Piotr Sowiński, Raúl S-Julián, and Carlos E Palau. 2023. <span>“Cloud-Native Workload Orchestration at the Edge: A Deployment Review and Future Directions.”</span> <em>Sensors</em> 23 (4): 2215.
</div>
<div id="ref-zhang2018comparative" class="csl-entry" role="listitem">
Zhang, Qi, Ling Liu, Calton Pu, Qiwei Dou, Liren Wu, and Wei Zhou. 2018. <span>“A Comparative Study of Containers and Virtual Machines in Big Data Environment.”</span> In <em>2018 IEEE 11th International Conference on Cloud Computing (CLOUD)</em>, 178–85. IEEE.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/thomasfaria\.github\.io\/retex-innovation-insee");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
      for (let i=0; i<annoteTargets.length; i++) {
        const annoteTarget = annoteTargets[i];
        const targetCell = annoteTarget.getAttribute("data-target-cell");
        const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
        const contentFn = () => {
          const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          if (content) {
            const tipContent = content.cloneNode(true);
            tipContent.classList.add("code-annotation-tip-content");
            return tipContent.outerHTML;
          }
        }
        const config = {
          allowHTML: true,
          content: contentFn,
          onShow: (instance) => {
            selectCodeLines(instance.reference);
            instance.reference.classList.add('code-annotation-active');
            window.tippy.hideAll();
          },
          onHide: (instance) => {
            unselectCodeLines();
            instance.reference.classList.remove('code-annotation-active');
          },
          maxWidth: 300,
          delay: [50, 0],
          duration: [200, 0],
          offset: [5, 10],
          arrow: true,
          appendTo: function(el) {
            return el.parentElement.parentElement.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto',
          placement: 'right',
          popperOptions: {
            modifiers: [
            {
              name: 'flip',
              options: {
                flipVariations: false, // true by default
                allowedAutoPlacements: ['right'],
                fallbackPlacements: ['right', 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left'],
              },
            },
            {
              name: 'preventOverflow',
              options: {
                mainAxis: false,
                altAxis: false
              }
            }
            ]        
          }      
        };
        window.tippy(annoteTarget, config); 
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../src/introduction/index.html" class="pagination-link" aria-label="1 - Introduction">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">1 - Introduction</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../src/implementation/index.html" class="pagination-link" aria-label="3 - Implémentation">
        <span class="nav-page-text">3 - Implémentation</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>